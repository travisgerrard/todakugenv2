"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/stories/generate/route";
exports.ids = ["app/api/stories/generate/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstories%2Fgenerate%2Froute&page=%2Fapi%2Fstories%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstories%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Ftravisgerrard%2FDocuments%2FApps%2FtodakuReaderV2%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftravisgerrard%2FDocuments%2FApps%2FtodakuReaderV2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstories%2Fgenerate%2Froute&page=%2Fapi%2Fstories%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstories%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Ftravisgerrard%2FDocuments%2FApps%2FtodakuReaderV2%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftravisgerrard%2FDocuments%2FApps%2FtodakuReaderV2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_travisgerrard_Documents_Apps_todakuReaderV2_src_app_api_stories_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/stories/generate/route.ts */ \"(rsc)/./src/app/api/stories/generate/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/stories/generate/route\",\n        pathname: \"/api/stories/generate\",\n        filename: \"route\",\n        bundlePath: \"app/api/stories/generate/route\"\n    },\n    resolvedPagePath: \"/Users/travisgerrard/Documents/Apps/todakuReaderV2/src/app/api/stories/generate/route.ts\",\n    nextConfigOutput,\n    userland: _Users_travisgerrard_Documents_Apps_todakuReaderV2_src_app_api_stories_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/stories/generate/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzdG9yaWVzJTJGZ2VuZXJhdGUlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnN0b3JpZXMlMkZnZW5lcmF0ZSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnN0b3JpZXMlMkZnZW5lcmF0ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnRyYXZpc2dlcnJhcmQlMkZEb2N1bWVudHMlMkZBcHBzJTJGdG9kYWt1UmVhZGVyVjIlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGdHJhdmlzZ2VycmFyZCUyRkRvY3VtZW50cyUyRkFwcHMlMkZ0b2Rha3VSZWFkZXJWMiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN3QztBQUNySDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZGFrdS1yZWFkZXIvPzViYjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3RyYXZpc2dlcnJhcmQvRG9jdW1lbnRzL0FwcHMvdG9kYWt1UmVhZGVyVjIvc3JjL2FwcC9hcGkvc3Rvcmllcy9nZW5lcmF0ZS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc3Rvcmllcy9nZW5lcmF0ZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3N0b3JpZXMvZ2VuZXJhdGVcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3N0b3JpZXMvZ2VuZXJhdGUvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvdHJhdmlzZ2VycmFyZC9Eb2N1bWVudHMvQXBwcy90b2Rha3VSZWFkZXJWMi9zcmMvYXBwL2FwaS9zdG9yaWVzL2dlbmVyYXRlL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3N0b3JpZXMvZ2VuZXJhdGUvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstories%2Fgenerate%2Froute&page=%2Fapi%2Fstories%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstories%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Ftravisgerrard%2FDocuments%2FApps%2FtodakuReaderV2%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftravisgerrard%2FDocuments%2FApps%2FtodakuReaderV2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/stories/generate/route.ts":
/*!***********************************************!*\
  !*** ./src/app/api/stories/generate/route.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/auth-helpers-nextjs */ \"(rsc)/./node_modules/@supabase/auth-helpers-nextjs/dist/index.js\");\n/* harmony import */ var _supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/api */ \"(rsc)/./src/lib/api.ts\");\n\n\n\n\nasync function POST(request) {\n    try {\n        const supabase = (0,_supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_0__.createRouteHandlerClient)({\n            cookies: next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies\n        });\n        const { data: { session } } = await supabase.auth.getSession();\n        if (!session) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_2__[\"default\"].json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const body = await request.json();\n        const { wanikaniLevel, genkiChapter, tadokuLevel, topic } = body;\n        if (!wanikaniLevel || !genkiChapter || !tadokuLevel || !topic) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_2__[\"default\"].json({\n                error: \"Missing required fields\"\n            }, {\n                status: 400\n            });\n        }\n        const story = await (0,_lib_api__WEBPACK_IMPORTED_MODULE_3__.generateStory)({\n            wanikani_level: wanikaniLevel,\n            genki_chapter: genkiChapter,\n            tadoku_level: tadokuLevel,\n            length: \"medium\",\n            topic\n        });\n        // Save the story with JSONB data\n        const storyData = {\n            user_id: session.user.id,\n            title: story.title,\n            content_jp: story.content_jp,\n            content_en: story.content_en,\n            wanikani_level: wanikaniLevel,\n            genki_chapter: genkiChapter,\n            tadoku_level: tadokuLevel,\n            topic,\n            vocabulary: story.vocabulary || [],\n            grammar: story.grammar || [],\n            quizzes: story.quizzes || [],\n            upvotes: 0\n        };\n        const { data: savedStory, error: saveError } = await supabase.from(\"stories\").insert(storyData).select().single();\n        if (saveError) {\n            console.error(\"Error saving story:\", saveError);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_2__[\"default\"].json({\n                error: \"Failed to save story\"\n            }, {\n                status: 500\n            });\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_2__[\"default\"].json(savedStory);\n    } catch (error) {\n        console.error(\"Error generating story:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_2__[\"default\"].json({\n            error: \"Failed to generate story\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9zdG9yaWVzL2dlbmVyYXRlL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF5RTtBQUNsQztBQUNJO0FBQ0Q7QUFFbkMsZUFBZUksS0FBS0MsT0FBZ0I7SUFDekMsSUFBSTtRQUNGLE1BQU1DLFdBQVdOLHVGQUF3QkEsQ0FBQztZQUFFQyxPQUFPQSxtREFBQUE7UUFBQztRQUNwRCxNQUFNLEVBQUVNLE1BQU0sRUFBRUMsT0FBTyxFQUFFLEVBQUUsR0FBRyxNQUFNRixTQUFTRyxJQUFJLENBQUNDLFVBQVU7UUFFNUQsSUFBSSxDQUFDRixTQUFTO1lBQ1osT0FBT04sa0ZBQVlBLENBQUNTLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFlLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUNwRTtRQUVBLE1BQU1DLE9BQU8sTUFBTVQsUUFBUU0sSUFBSTtRQUMvQixNQUFNLEVBQUVJLGFBQWEsRUFBRUMsWUFBWSxFQUFFQyxXQUFXLEVBQUVDLEtBQUssRUFBRSxHQUFHSjtRQUU1RCxJQUFJLENBQUNDLGlCQUFpQixDQUFDQyxnQkFBZ0IsQ0FBQ0MsZUFBZSxDQUFDQyxPQUFPO1lBQzdELE9BQU9oQixrRkFBWUEsQ0FBQ1MsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUEwQixHQUNuQztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsTUFBTU0sUUFBUSxNQUFNaEIsdURBQWFBLENBQUM7WUFDaENpQixnQkFBZ0JMO1lBQ2hCTSxlQUFlTDtZQUNmTSxjQUFjTDtZQUNkTSxRQUFRO1lBQ1JMO1FBQ0Y7UUFFQSxpQ0FBaUM7UUFDakMsTUFBTU0sWUFBWTtZQUNoQkMsU0FBU2pCLFFBQVFrQixJQUFJLENBQUNDLEVBQUU7WUFDeEJDLE9BQU9ULE1BQU1TLEtBQUs7WUFDbEJDLFlBQVlWLE1BQU1VLFVBQVU7WUFDNUJDLFlBQVlYLE1BQU1XLFVBQVU7WUFDNUJWLGdCQUFnQkw7WUFDaEJNLGVBQWVMO1lBQ2ZNLGNBQWNMO1lBQ2RDO1lBQ0FhLFlBQVlaLE1BQU1ZLFVBQVUsSUFBSSxFQUFFO1lBQ2xDQyxTQUFTYixNQUFNYSxPQUFPLElBQUksRUFBRTtZQUM1QkMsU0FBU2QsTUFBTWMsT0FBTyxJQUFJLEVBQUU7WUFDNUJDLFNBQVM7UUFDWDtRQUVBLE1BQU0sRUFBRTNCLE1BQU00QixVQUFVLEVBQUV2QixPQUFPd0IsU0FBUyxFQUFFLEdBQUcsTUFBTTlCLFNBQ2xEK0IsSUFBSSxDQUFDLFdBQ0xDLE1BQU0sQ0FBQ2QsV0FDUGUsTUFBTSxHQUNOQyxNQUFNO1FBRVQsSUFBSUosV0FBVztZQUNiSyxRQUFRN0IsS0FBSyxDQUFDLHVCQUF1QndCO1lBQ3JDLE9BQU9sQyxrRkFBWUEsQ0FBQ1MsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUF1QixHQUNoQztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsT0FBT1gsa0ZBQVlBLENBQUNTLElBQUksQ0FBQ3dCO0lBQzNCLEVBQUUsT0FBT3ZCLE9BQU87UUFDZDZCLFFBQVE3QixLQUFLLENBQUMsMkJBQTJCQTtRQUN6QyxPQUFPVixrRkFBWUEsQ0FBQ1MsSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1FBQTJCLEdBQ3BDO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kYWt1LXJlYWRlci8uL3NyYy9hcHAvYXBpL3N0b3JpZXMvZ2VuZXJhdGUvcm91dGUudHM/MmRhMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVSb3V0ZUhhbmRsZXJDbGllbnQgfSBmcm9tICdAc3VwYWJhc2UvYXV0aC1oZWxwZXJzLW5leHRqcyc7XG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJztcbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IGdlbmVyYXRlU3RvcnkgfSBmcm9tICdAL2xpYi9hcGknO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVSb3V0ZUhhbmRsZXJDbGllbnQoeyBjb29raWVzIH0pO1xuICAgIGNvbnN0IHsgZGF0YTogeyBzZXNzaW9uIH0gfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0U2Vzc2lvbigpO1xuXG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc3QgeyB3YW5pa2FuaUxldmVsLCBnZW5raUNoYXB0ZXIsIHRhZG9rdUxldmVsLCB0b3BpYyB9ID0gYm9keTtcblxuICAgIGlmICghd2FuaWthbmlMZXZlbCB8fCAhZ2Vua2lDaGFwdGVyIHx8ICF0YWRva3VMZXZlbCB8fCAhdG9waWMpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ01pc3NpbmcgcmVxdWlyZWQgZmllbGRzJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RvcnkgPSBhd2FpdCBnZW5lcmF0ZVN0b3J5KHtcbiAgICAgIHdhbmlrYW5pX2xldmVsOiB3YW5pa2FuaUxldmVsLFxuICAgICAgZ2Vua2lfY2hhcHRlcjogZ2Vua2lDaGFwdGVyLFxuICAgICAgdGFkb2t1X2xldmVsOiB0YWRva3VMZXZlbCxcbiAgICAgIGxlbmd0aDogJ21lZGl1bScsXG4gICAgICB0b3BpYyxcbiAgICB9KTtcblxuICAgIC8vIFNhdmUgdGhlIHN0b3J5IHdpdGggSlNPTkIgZGF0YVxuICAgIGNvbnN0IHN0b3J5RGF0YSA9IHtcbiAgICAgIHVzZXJfaWQ6IHNlc3Npb24udXNlci5pZCxcbiAgICAgIHRpdGxlOiBzdG9yeS50aXRsZSxcbiAgICAgIGNvbnRlbnRfanA6IHN0b3J5LmNvbnRlbnRfanAsXG4gICAgICBjb250ZW50X2VuOiBzdG9yeS5jb250ZW50X2VuLFxuICAgICAgd2FuaWthbmlfbGV2ZWw6IHdhbmlrYW5pTGV2ZWwsXG4gICAgICBnZW5raV9jaGFwdGVyOiBnZW5raUNoYXB0ZXIsXG4gICAgICB0YWRva3VfbGV2ZWw6IHRhZG9rdUxldmVsLFxuICAgICAgdG9waWMsXG4gICAgICB2b2NhYnVsYXJ5OiBzdG9yeS52b2NhYnVsYXJ5IHx8IFtdLFxuICAgICAgZ3JhbW1hcjogc3RvcnkuZ3JhbW1hciB8fCBbXSxcbiAgICAgIHF1aXp6ZXM6IHN0b3J5LnF1aXp6ZXMgfHwgW10sXG4gICAgICB1cHZvdGVzOiAwLFxuICAgIH07XG5cbiAgICBjb25zdCB7IGRhdGE6IHNhdmVkU3RvcnksIGVycm9yOiBzYXZlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnc3RvcmllcycpXG4gICAgICAuaW5zZXJ0KHN0b3J5RGF0YSlcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKHNhdmVFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHN0b3J5OicsIHNhdmVFcnJvcik7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gc2F2ZSBzdG9yeScgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihzYXZlZFN0b3J5KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZW5lcmF0aW5nIHN0b3J5OicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGdlbmVyYXRlIHN0b3J5JyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufSAiXSwibmFtZXMiOlsiY3JlYXRlUm91dGVIYW5kbGVyQ2xpZW50IiwiY29va2llcyIsIk5leHRSZXNwb25zZSIsImdlbmVyYXRlU3RvcnkiLCJQT1NUIiwicmVxdWVzdCIsInN1cGFiYXNlIiwiZGF0YSIsInNlc3Npb24iLCJhdXRoIiwiZ2V0U2Vzc2lvbiIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsImJvZHkiLCJ3YW5pa2FuaUxldmVsIiwiZ2Vua2lDaGFwdGVyIiwidGFkb2t1TGV2ZWwiLCJ0b3BpYyIsInN0b3J5Iiwid2FuaWthbmlfbGV2ZWwiLCJnZW5raV9jaGFwdGVyIiwidGFkb2t1X2xldmVsIiwibGVuZ3RoIiwic3RvcnlEYXRhIiwidXNlcl9pZCIsInVzZXIiLCJpZCIsInRpdGxlIiwiY29udGVudF9qcCIsImNvbnRlbnRfZW4iLCJ2b2NhYnVsYXJ5IiwiZ3JhbW1hciIsInF1aXp6ZXMiLCJ1cHZvdGVzIiwic2F2ZWRTdG9yeSIsInNhdmVFcnJvciIsImZyb20iLCJpbnNlcnQiLCJzZWxlY3QiLCJzaW5nbGUiLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/stories/generate/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/api.ts":
/*!************************!*\
  !*** ./src/lib/api.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateStory: () => (/* binding */ generateStory)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\nasync function generateStory(params) {\n    const { wanikani_level, genki_chapter, tadoku_level, length, topic } = params;\n    const maxRetries = 3;\n    let attempt = 0;\n    while(attempt < maxRetries){\n        try {\n            const prompt = `Generate a Japanese story with the following requirements:\n- Wanikani level: ${wanikani_level}\n- Genki chapter: ${genki_chapter}\n- Tadoku level: ${tadoku_level}\n- Length: ${length}\n- Topic: ${topic}\n\nPlease provide:\n1. A title in Japanese and English\n2. The story in Japanese\n3. The story in English\n4. A list of vocabulary words with readings and meanings\n5. A list of grammar points with explanations\n6. Example sentences for each vocabulary word and grammar point from the story\n7. Multiple choice quiz questions for:\n   - EVERY vocabulary word (testing meaning and usage)\n   - EVERY grammar point (testing understanding and application)\n   - Story comprehension (3-4 questions testing understanding of the story's content, main ideas, and details)\n\nCRITICAL REQUIREMENTS:\n1. You MUST create EXACTLY one quiz question for each vocabulary word\n2. You MUST create EXACTLY one quiz question for each grammar point\n3. The number of vocabulary quizzes MUST equal the number of vocabulary words\n4. The number of grammar quizzes MUST equal the number of grammar points\n5. Each vocabulary quiz MUST include the word it's testing in the 'related_item' field\n6. Each grammar quiz MUST include the pattern it's testing in the 'related_item' field\n\nFormat the response as JSON with the following structure:\n{\n  \"title\": {\n    \"jp\": \"Japanese title\",\n    \"en\": \"English title\"\n  },\n  \"content_jp\": \"Japanese story text\",\n  \"content_en\": \"English story text\",\n  \"vocabulary\": [\n    {\n      \"word\": \"word in Japanese\",\n      \"reading\": \"reading in hiragana\",\n      \"meaning\": \"English meaning\",\n      \"example\": \"example sentence from story\",\n      \"example_translation\": \"English translation of example\"\n    }\n  ],\n  \"grammar\": [\n    {\n      \"pattern\": \"grammar pattern\",\n      \"explanation\": \"English explanation\",\n      \"example\": \"example sentence from story\",\n      \"example_translation\": \"English translation of example\"\n    }\n  ],\n  \"quizzes\": [\n    {\n      \"question\": \"quiz question\",\n      \"options\": [\"option 1\", \"option 2\", \"option 3\", \"option 4\"],\n      \"correct_answer\": 0,\n      \"explanation\": \"explanation of the correct answer\",\n      \"type\": \"vocabulary|grammar|comprehension\",\n      \"related_item\": \"word or pattern (for vocabulary/grammar quizzes)\"\n    }\n  ]\n}`;\n            const completion = await openai.chat.completions.create({\n                model: \"gpt-4-turbo-preview\",\n                messages: [\n                    {\n                        role: \"system\",\n                        content: \"You are a Japanese language teacher creating graded readers and quizzes. Always provide accurate Japanese text and translations. Create engaging stories with clear plot points that can be tested in comprehension questions. You MUST create EXACTLY one quiz question for each vocabulary word and grammar point. The number of quizzes must match the number of vocabulary words and grammar points exactly.\"\n                    },\n                    {\n                        role: \"user\",\n                        content: prompt\n                    }\n                ],\n                response_format: {\n                    type: \"json_object\"\n                },\n                temperature: 0.7\n            });\n            const response = completion.choices[0].message.content;\n            if (!response) {\n                throw new Error(\"No response from OpenAI\");\n            }\n            const story = JSON.parse(response);\n            // Validate that we have quizzes for all vocabulary and grammar points\n            const vocabularyQuizzes = story.quizzes.filter((q)=>q.type === \"vocabulary\");\n            const grammarQuizzes = story.quizzes.filter((q)=>q.type === \"grammar\");\n            if (vocabularyQuizzes.length !== story.vocabulary.length) {\n                throw new Error(`Mismatch: ${vocabularyQuizzes.length} vocabulary quizzes for ${story.vocabulary.length} vocabulary words`);\n            }\n            if (grammarQuizzes.length !== story.grammar.length) {\n                throw new Error(`Mismatch: ${grammarQuizzes.length} grammar quizzes for ${story.grammar.length} grammar points`);\n            }\n            // Validate that each vocabulary word and grammar point has a corresponding quiz\n            const vocabularyWords = new Set(story.vocabulary.map((v)=>v.word));\n            const grammarPatterns = new Set(story.grammar.map((g)=>g.pattern));\n            const quizVocabularyWords = new Set(vocabularyQuizzes.map((q)=>q.related_item));\n            const quizGrammarPatterns = new Set(grammarQuizzes.map((q)=>q.related_item));\n            const missingVocabulary = Array.from(vocabularyWords).filter((word)=>!quizVocabularyWords.has(word));\n            const missingGrammar = Array.from(grammarPatterns).filter((pattern)=>!quizGrammarPatterns.has(pattern));\n            if (missingVocabulary.length > 0) {\n                throw new Error(`Missing quizzes for vocabulary words: ${missingVocabulary.join(\", \")}`);\n            }\n            if (missingGrammar.length > 0) {\n                throw new Error(`Missing quizzes for grammar patterns: ${missingGrammar.join(\", \")}`);\n            }\n            return {\n                title: story.title.jp,\n                content_jp: story.content_jp,\n                content_en: story.content_en,\n                vocabulary: story.vocabulary,\n                grammar: story.grammar,\n                quizzes: story.quizzes\n            };\n        } catch (error) {\n            attempt++;\n            if (attempt === maxRetries) {\n                console.error(\"Error parsing OpenAI response:\", error);\n                throw new Error(\"Failed to generate valid story after multiple attempts\");\n            }\n            console.log(`Attempt ${attempt} failed, retrying...`);\n            // Wait for a short time before retrying\n            await new Promise((resolve)=>setTimeout(resolve, 1000));\n        }\n    }\n    throw new Error(\"Failed to generate valid story after multiple attempts\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSSxDQUFDUixpQkFBaUJWLE1BQU0sQ0FBQ1ksQ0FBQUEsVUFBVyxDQUFDRyxvQkFBb0JJLEdBQUcsQ0FBQ1A7WUFFOUYsSUFBSUksa0JBQWtCekMsTUFBTSxHQUFHLEdBQUc7Z0JBQ2hDLE1BQU0sSUFBSW1CLE1BQU0sQ0FBQyxzQ0FBc0MsRUFBRXNCLGtCQUFrQkssSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUN6RjtZQUVBLElBQUlELGVBQWU3QyxNQUFNLEdBQUcsR0FBRztnQkFDN0IsTUFBTSxJQUFJbUIsTUFBTSxDQUFDLHNDQUFzQyxFQUFFMEIsZUFBZUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUN0RjtZQUVBLE9BQU87Z0JBQ0xDLE9BQU8zQixNQUFNMkIsS0FBSyxDQUFDQyxFQUFFO2dCQUNyQkMsWUFBWTdCLE1BQU02QixVQUFVO2dCQUM1QkMsWUFBWTlCLE1BQU04QixVQUFVO2dCQUM1QnRCLFlBQVlSLE1BQU1RLFVBQVU7Z0JBQzVCQyxTQUFTVCxNQUFNUyxPQUFPO2dCQUN0QkwsU0FBU0osTUFBTUksT0FBTztZQUN4QjtRQUNGLEVBQUUsT0FBTzJCLE9BQU87WUFDZGhEO1lBQ0EsSUFBSUEsWUFBWUQsWUFBWTtnQkFDMUJrRCxRQUFRRCxLQUFLLENBQUMsa0NBQWtDQTtnQkFDaEQsTUFBTSxJQUFJaEMsTUFBTTtZQUNsQjtZQUNBaUMsUUFBUUMsR0FBRyxDQUFDLENBQUMsUUFBUSxFQUFFbEQsUUFBUSxvQkFBb0IsQ0FBQztZQUNwRCx3Q0FBd0M7WUFDeEMsTUFBTSxJQUFJbUQsUUFBUUMsQ0FBQUEsVUFBV0MsV0FBV0QsU0FBUztRQUNuRDtJQUNGO0lBRUEsTUFBTSxJQUFJcEMsTUFBTTtBQUNsQiIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZGFrdS1yZWFkZXIvLi9zcmMvbGliL2FwaS50cz8yZmFiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBPcGVuQUkgZnJvbSAnb3BlbmFpJztcbmltcG9ydCB7IERhdGFiYXNlIH0gZnJvbSAnLi90eXBlcyc7XG5cbmNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUkoe1xuICBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZLFxufSk7XG5cbmludGVyZmFjZSBTdG9yeUdlbmVyYXRpb25QYXJhbXMge1xuICB3YW5pa2FuaV9sZXZlbDogbnVtYmVyO1xuICBnZW5raV9jaGFwdGVyOiBudW1iZXI7XG4gIHRhZG9rdV9sZXZlbDogbnVtYmVyO1xuICBsZW5ndGg6ICdzaG9ydCcgfCAnbWVkaXVtJyB8ICdsb25nJztcbiAgdG9waWM6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIFZvY2FidWxhcnlJdGVtIHtcbiAgd29yZDogc3RyaW5nO1xuICByZWFkaW5nOiBzdHJpbmc7XG4gIG1lYW5pbmc6IHN0cmluZztcbiAgZXhhbXBsZTogc3RyaW5nO1xuICBleGFtcGxlX3RyYW5zbGF0aW9uOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBHcmFtbWFyUG9pbnQge1xuICBwYXR0ZXJuOiBzdHJpbmc7XG4gIGV4cGxhbmF0aW9uOiBzdHJpbmc7XG4gIGV4YW1wbGU6IHN0cmluZztcbiAgZXhhbXBsZV90cmFuc2xhdGlvbjogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgUXVpeiB7XG4gIHF1ZXN0aW9uOiBzdHJpbmc7XG4gIG9wdGlvbnM6IHN0cmluZ1tdO1xuICBjb3JyZWN0X2Fuc3dlcjogbnVtYmVyO1xuICBleHBsYW5hdGlvbjogc3RyaW5nO1xuICB0eXBlOiAndm9jYWJ1bGFyeScgfCAnZ3JhbW1hcicgfCAnY29tcHJlaGVuc2lvbic7XG4gIHJlbGF0ZWRfaXRlbT86IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIFN0b3J5IHtcbiAgdGl0bGU6IHN0cmluZztcbiAgY29udGVudF9qcDogc3RyaW5nO1xuICBjb250ZW50X2VuOiBzdHJpbmc7XG4gIHZvY2FidWxhcnk6IFZvY2FidWxhcnlJdGVtW107XG4gIGdyYW1tYXI6IEdyYW1tYXJQb2ludFtdO1xuICBxdWl6emVzOiBRdWl6W107XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVN0b3J5KHBhcmFtczogU3RvcnlHZW5lcmF0aW9uUGFyYW1zKTogUHJvbWlzZTxTdG9yeT4ge1xuICBjb25zdCB7IHdhbmlrYW5pX2xldmVsLCBnZW5raV9jaGFwdGVyLCB0YWRva3VfbGV2ZWwsIGxlbmd0aCwgdG9waWMgfSA9IHBhcmFtcztcbiAgY29uc3QgbWF4UmV0cmllcyA9IDM7XG4gIGxldCBhdHRlbXB0ID0gMDtcblxuICB3aGlsZSAoYXR0ZW1wdCA8IG1heFJldHJpZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcHJvbXB0ID0gYEdlbmVyYXRlIGEgSmFwYW5lc2Ugc3Rvcnkgd2l0aCB0aGUgZm9sbG93aW5nIHJlcXVpcmVtZW50czpcbi0gV2FuaWthbmkgbGV2ZWw6ICR7d2FuaWthbmlfbGV2ZWx9XG4tIEdlbmtpIGNoYXB0ZXI6ICR7Z2Vua2lfY2hhcHRlcn1cbi0gVGFkb2t1IGxldmVsOiAke3RhZG9rdV9sZXZlbH1cbi0gTGVuZ3RoOiAke2xlbmd0aH1cbi0gVG9waWM6ICR7dG9waWN9XG5cblBsZWFzZSBwcm92aWRlOlxuMS4gQSB0aXRsZSBpbiBKYXBhbmVzZSBhbmQgRW5nbGlzaFxuMi4gVGhlIHN0b3J5IGluIEphcGFuZXNlXG4zLiBUaGUgc3RvcnkgaW4gRW5nbGlzaFxuNC4gQSBsaXN0IG9mIHZvY2FidWxhcnkgd29yZHMgd2l0aCByZWFkaW5ncyBhbmQgbWVhbmluZ3NcbjUuIEEgbGlzdCBvZiBncmFtbWFyIHBvaW50cyB3aXRoIGV4cGxhbmF0aW9uc1xuNi4gRXhhbXBsZSBzZW50ZW5jZXMgZm9yIGVhY2ggdm9jYWJ1bGFyeSB3b3JkIGFuZCBncmFtbWFyIHBvaW50IGZyb20gdGhlIHN0b3J5XG43LiBNdWx0aXBsZSBjaG9pY2UgcXVpeiBxdWVzdGlvbnMgZm9yOlxuICAgLSBFVkVSWSB2b2NhYnVsYXJ5IHdvcmQgKHRlc3RpbmcgbWVhbmluZyBhbmQgdXNhZ2UpXG4gICAtIEVWRVJZIGdyYW1tYXIgcG9pbnQgKHRlc3RpbmcgdW5kZXJzdGFuZGluZyBhbmQgYXBwbGljYXRpb24pXG4gICAtIFN0b3J5IGNvbXByZWhlbnNpb24gKDMtNCBxdWVzdGlvbnMgdGVzdGluZyB1bmRlcnN0YW5kaW5nIG9mIHRoZSBzdG9yeSdzIGNvbnRlbnQsIG1haW4gaWRlYXMsIGFuZCBkZXRhaWxzKVxuXG5DUklUSUNBTCBSRVFVSVJFTUVOVFM6XG4xLiBZb3UgTVVTVCBjcmVhdGUgRVhBQ1RMWSBvbmUgcXVpeiBxdWVzdGlvbiBmb3IgZWFjaCB2b2NhYnVsYXJ5IHdvcmRcbjIuIFlvdSBNVVNUIGNyZWF0ZSBFWEFDVExZIG9uZSBxdWl6IHF1ZXN0aW9uIGZvciBlYWNoIGdyYW1tYXIgcG9pbnRcbjMuIFRoZSBudW1iZXIgb2Ygdm9jYWJ1bGFyeSBxdWl6emVzIE1VU1QgZXF1YWwgdGhlIG51bWJlciBvZiB2b2NhYnVsYXJ5IHdvcmRzXG40LiBUaGUgbnVtYmVyIG9mIGdyYW1tYXIgcXVpenplcyBNVVNUIGVxdWFsIHRoZSBudW1iZXIgb2YgZ3JhbW1hciBwb2ludHNcbjUuIEVhY2ggdm9jYWJ1bGFyeSBxdWl6IE1VU1QgaW5jbHVkZSB0aGUgd29yZCBpdCdzIHRlc3RpbmcgaW4gdGhlICdyZWxhdGVkX2l0ZW0nIGZpZWxkXG42LiBFYWNoIGdyYW1tYXIgcXVpeiBNVVNUIGluY2x1ZGUgdGhlIHBhdHRlcm4gaXQncyB0ZXN0aW5nIGluIHRoZSAncmVsYXRlZF9pdGVtJyBmaWVsZFxuXG5Gb3JtYXQgdGhlIHJlc3BvbnNlIGFzIEpTT04gd2l0aCB0aGUgZm9sbG93aW5nIHN0cnVjdHVyZTpcbntcbiAgXCJ0aXRsZVwiOiB7XG4gICAgXCJqcFwiOiBcIkphcGFuZXNlIHRpdGxlXCIsXG4gICAgXCJlblwiOiBcIkVuZ2xpc2ggdGl0bGVcIlxuICB9LFxuICBcImNvbnRlbnRfanBcIjogXCJKYXBhbmVzZSBzdG9yeSB0ZXh0XCIsXG4gIFwiY29udGVudF9lblwiOiBcIkVuZ2xpc2ggc3RvcnkgdGV4dFwiLFxuICBcInZvY2FidWxhcnlcIjogW1xuICAgIHtcbiAgICAgIFwid29yZFwiOiBcIndvcmQgaW4gSmFwYW5lc2VcIixcbiAgICAgIFwicmVhZGluZ1wiOiBcInJlYWRpbmcgaW4gaGlyYWdhbmFcIixcbiAgICAgIFwibWVhbmluZ1wiOiBcIkVuZ2xpc2ggbWVhbmluZ1wiLFxuICAgICAgXCJleGFtcGxlXCI6IFwiZXhhbXBsZSBzZW50ZW5jZSBmcm9tIHN0b3J5XCIsXG4gICAgICBcImV4YW1wbGVfdHJhbnNsYXRpb25cIjogXCJFbmdsaXNoIHRyYW5zbGF0aW9uIG9mIGV4YW1wbGVcIlxuICAgIH1cbiAgXSxcbiAgXCJncmFtbWFyXCI6IFtcbiAgICB7XG4gICAgICBcInBhdHRlcm5cIjogXCJncmFtbWFyIHBhdHRlcm5cIixcbiAgICAgIFwiZXhwbGFuYXRpb25cIjogXCJFbmdsaXNoIGV4cGxhbmF0aW9uXCIsXG4gICAgICBcImV4YW1wbGVcIjogXCJleGFtcGxlIHNlbnRlbmNlIGZyb20gc3RvcnlcIixcbiAgICAgIFwiZXhhbXBsZV90cmFuc2xhdGlvblwiOiBcIkVuZ2xpc2ggdHJhbnNsYXRpb24gb2YgZXhhbXBsZVwiXG4gICAgfVxuICBdLFxuICBcInF1aXp6ZXNcIjogW1xuICAgIHtcbiAgICAgIFwicXVlc3Rpb25cIjogXCJxdWl6IHF1ZXN0aW9uXCIsXG4gICAgICBcIm9wdGlvbnNcIjogW1wib3B0aW9uIDFcIiwgXCJvcHRpb24gMlwiLCBcIm9wdGlvbiAzXCIsIFwib3B0aW9uIDRcIl0sXG4gICAgICBcImNvcnJlY3RfYW5zd2VyXCI6IDAsXG4gICAgICBcImV4cGxhbmF0aW9uXCI6IFwiZXhwbGFuYXRpb24gb2YgdGhlIGNvcnJlY3QgYW5zd2VyXCIsXG4gICAgICBcInR5cGVcIjogXCJ2b2NhYnVsYXJ5fGdyYW1tYXJ8Y29tcHJlaGVuc2lvblwiLFxuICAgICAgXCJyZWxhdGVkX2l0ZW1cIjogXCJ3b3JkIG9yIHBhdHRlcm4gKGZvciB2b2NhYnVsYXJ5L2dyYW1tYXIgcXVpenplcylcIlxuICAgIH1cbiAgXVxufWA7XG5cbiAgICAgIGNvbnN0IGNvbXBsZXRpb24gPSBhd2FpdCBvcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgICBtb2RlbDogXCJncHQtNC10dXJiby1wcmV2aWV3XCIsXG4gICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcm9sZTogXCJzeXN0ZW1cIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IFwiWW91IGFyZSBhIEphcGFuZXNlIGxhbmd1YWdlIHRlYWNoZXIgY3JlYXRpbmcgZ3JhZGVkIHJlYWRlcnMgYW5kIHF1aXp6ZXMuIEFsd2F5cyBwcm92aWRlIGFjY3VyYXRlIEphcGFuZXNlIHRleHQgYW5kIHRyYW5zbGF0aW9ucy4gQ3JlYXRlIGVuZ2FnaW5nIHN0b3JpZXMgd2l0aCBjbGVhciBwbG90IHBvaW50cyB0aGF0IGNhbiBiZSB0ZXN0ZWQgaW4gY29tcHJlaGVuc2lvbiBxdWVzdGlvbnMuIFlvdSBNVVNUIGNyZWF0ZSBFWEFDVExZIG9uZSBxdWl6IHF1ZXN0aW9uIGZvciBlYWNoIHZvY2FidWxhcnkgd29yZCBhbmQgZ3JhbW1hciBwb2ludC4gVGhlIG51bWJlciBvZiBxdWl6emVzIG11c3QgbWF0Y2ggdGhlIG51bWJlciBvZiB2b2NhYnVsYXJ5IHdvcmRzIGFuZCBncmFtbWFyIHBvaW50cyBleGFjdGx5LlwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IHByb21wdFxuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgcmVzcG9uc2VfZm9ybWF0OiB7IHR5cGU6IFwianNvbl9vYmplY3RcIiB9LFxuICAgICAgICB0ZW1wZXJhdHVyZTogMC43LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gY29tcGxldGlvbi5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudDtcbiAgICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyByZXNwb25zZSBmcm9tIE9wZW5BSScpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzdG9yeSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xuICAgICAgXG4gICAgICAvLyBWYWxpZGF0ZSB0aGF0IHdlIGhhdmUgcXVpenplcyBmb3IgYWxsIHZvY2FidWxhcnkgYW5kIGdyYW1tYXIgcG9pbnRzXG4gICAgICBjb25zdCB2b2NhYnVsYXJ5UXVpenplcyA9IHN0b3J5LnF1aXp6ZXMuZmlsdGVyKChxOiBRdWl6KSA9PiBxLnR5cGUgPT09ICd2b2NhYnVsYXJ5Jyk7XG4gICAgICBjb25zdCBncmFtbWFyUXVpenplcyA9IHN0b3J5LnF1aXp6ZXMuZmlsdGVyKChxOiBRdWl6KSA9PiBxLnR5cGUgPT09ICdncmFtbWFyJyk7XG4gICAgICBcbiAgICAgIGlmICh2b2NhYnVsYXJ5UXVpenplcy5sZW5ndGggIT09IHN0b3J5LnZvY2FidWxhcnkubGVuZ3RoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTWlzbWF0Y2g6ICR7dm9jYWJ1bGFyeVF1aXp6ZXMubGVuZ3RofSB2b2NhYnVsYXJ5IHF1aXp6ZXMgZm9yICR7c3Rvcnkudm9jYWJ1bGFyeS5sZW5ndGh9IHZvY2FidWxhcnkgd29yZHNgKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGdyYW1tYXJRdWl6emVzLmxlbmd0aCAhPT0gc3RvcnkuZ3JhbW1hci5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaXNtYXRjaDogJHtncmFtbWFyUXVpenplcy5sZW5ndGh9IGdyYW1tYXIgcXVpenplcyBmb3IgJHtzdG9yeS5ncmFtbWFyLmxlbmd0aH0gZ3JhbW1hciBwb2ludHNgKTtcbiAgICAgIH1cblxuICAgICAgLy8gVmFsaWRhdGUgdGhhdCBlYWNoIHZvY2FidWxhcnkgd29yZCBhbmQgZ3JhbW1hciBwb2ludCBoYXMgYSBjb3JyZXNwb25kaW5nIHF1aXpcbiAgICAgIGNvbnN0IHZvY2FidWxhcnlXb3JkcyA9IG5ldyBTZXQoc3Rvcnkudm9jYWJ1bGFyeS5tYXAoKHY6IFZvY2FidWxhcnlJdGVtKSA9PiB2LndvcmQpKTtcbiAgICAgIGNvbnN0IGdyYW1tYXJQYXR0ZXJucyA9IG5ldyBTZXQoc3RvcnkuZ3JhbW1hci5tYXAoKGc6IEdyYW1tYXJQb2ludCkgPT4gZy5wYXR0ZXJuKSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHF1aXpWb2NhYnVsYXJ5V29yZHMgPSBuZXcgU2V0KHZvY2FidWxhcnlRdWl6emVzLm1hcCgocTogUXVpeikgPT4gcS5yZWxhdGVkX2l0ZW0pKTtcbiAgICAgIGNvbnN0IHF1aXpHcmFtbWFyUGF0dGVybnMgPSBuZXcgU2V0KGdyYW1tYXJRdWl6emVzLm1hcCgocTogUXVpeikgPT4gcS5yZWxhdGVkX2l0ZW0pKTtcbiAgICAgIFxuICAgICAgY29uc3QgbWlzc2luZ1ZvY2FidWxhcnkgPSBBcnJheS5mcm9tKHZvY2FidWxhcnlXb3JkcykuZmlsdGVyKHdvcmQgPT4gIXF1aXpWb2NhYnVsYXJ5V29yZHMuaGFzKHdvcmQpKTtcbiAgICAgIGNvbnN0IG1pc3NpbmdHcmFtbWFyID0gQXJyYXkuZnJvbShncmFtbWFyUGF0dGVybnMpLmZpbHRlcihwYXR0ZXJuID0+ICFxdWl6R3JhbW1hclBhdHRlcm5zLmhhcyhwYXR0ZXJuKSk7XG4gICAgICBcbiAgICAgIGlmIChtaXNzaW5nVm9jYWJ1bGFyeS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBxdWl6emVzIGZvciB2b2NhYnVsYXJ5IHdvcmRzOiAke21pc3NpbmdWb2NhYnVsYXJ5LmpvaW4oJywgJyl9YCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChtaXNzaW5nR3JhbW1hci5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBxdWl6emVzIGZvciBncmFtbWFyIHBhdHRlcm5zOiAke21pc3NpbmdHcmFtbWFyLmpvaW4oJywgJyl9YCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRpdGxlOiBzdG9yeS50aXRsZS5qcCxcbiAgICAgICAgY29udGVudF9qcDogc3RvcnkuY29udGVudF9qcCxcbiAgICAgICAgY29udGVudF9lbjogc3RvcnkuY29udGVudF9lbixcbiAgICAgICAgdm9jYWJ1bGFyeTogc3Rvcnkudm9jYWJ1bGFyeSxcbiAgICAgICAgZ3JhbW1hcjogc3RvcnkuZ3JhbW1hcixcbiAgICAgICAgcXVpenplczogc3RvcnkucXVpenplcyxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGF0dGVtcHQrKztcbiAgICAgIGlmIChhdHRlbXB0ID09PSBtYXhSZXRyaWVzKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgT3BlbkFJIHJlc3BvbnNlOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZ2VuZXJhdGUgdmFsaWQgc3RvcnkgYWZ0ZXIgbXVsdGlwbGUgYXR0ZW1wdHMnKTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKGBBdHRlbXB0ICR7YXR0ZW1wdH0gZmFpbGVkLCByZXRyeWluZy4uLmApO1xuICAgICAgLy8gV2FpdCBmb3IgYSBzaG9ydCB0aW1lIGJlZm9yZSByZXRyeWluZ1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKTtcbiAgICB9XG4gIH1cblxuICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBnZW5lcmF0ZSB2YWxpZCBzdG9yeSBhZnRlciBtdWx0aXBsZSBhdHRlbXB0cycpO1xufSAiXSwibmFtZXMiOlsiT3BlbkFJIiwib3BlbmFpIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiZ2VuZXJhdGVTdG9yeSIsInBhcmFtcyIsIndhbmlrYW5pX2xldmVsIiwiZ2Vua2lfY2hhcHRlciIsInRhZG9rdV9sZXZlbCIsImxlbmd0aCIsInRvcGljIiwibWF4UmV0cmllcyIsImF0dGVtcHQiLCJwcm9tcHQiLCJjb21wbGV0aW9uIiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwibW9kZWwiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwicmVzcG9uc2VfZm9ybWF0IiwidHlwZSIsInRlbXBlcmF0dXJlIiwicmVzcG9uc2UiLCJjaG9pY2VzIiwibWVzc2FnZSIsIkVycm9yIiwic3RvcnkiLCJKU09OIiwicGFyc2UiLCJ2b2NhYnVsYXJ5UXVpenplcyIsInF1aXp6ZXMiLCJmaWx0ZXIiLCJxIiwiZ3JhbW1hclF1aXp6ZXMiLCJ2b2NhYnVsYXJ5IiwiZ3JhbW1hciIsInZvY2FidWxhcnlXb3JkcyIsIlNldCIsIm1hcCIsInYiLCJ3b3JkIiwiZ3JhbW1hclBhdHRlcm5zIiwiZyIsInBhdHRlcm4iLCJxdWl6Vm9jYWJ1bGFyeVdvcmRzIiwicmVsYXRlZF9pdGVtIiwicXVpekdyYW1tYXJQYXR0ZXJucyIsIm1pc3NpbmdWb2NhYnVsYXJ5IiwiQXJyYXkiLCJmcm9tIiwiaGFzIiwibWlzc2luZ0dyYW1tYXIiLCJqb2luIiwidGl0bGUiLCJqcCIsImNvbnRlbnRfanAiLCJjb250ZW50X2VuIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/api.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/set-cookie-parser","vendor-chunks/webidl-conversions","vendor-chunks/jose","vendor-chunks/formdata-node","vendor-chunks/openai","vendor-chunks/form-data-encoder","vendor-chunks/agentkeepalive","vendor-chunks/web-streams-polyfill","vendor-chunks/node-fetch","vendor-chunks/ms","vendor-chunks/humanize-ms","vendor-chunks/event-target-shim","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstories%2Fgenerate%2Froute&page=%2Fapi%2Fstories%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstories%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Ftravisgerrard%2FDocuments%2FApps%2FtodakuReaderV2%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftravisgerrard%2FDocuments%2FApps%2FtodakuReaderV2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();