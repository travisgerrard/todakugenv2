(()=>{var e={};e.id=165,e.ids=[165],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},9910:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>d,pages:()=>u,routeModule:()=>g,tree:()=>c});var s=r(482),n=r(9108),o=r(2563),i=r.n(o),a=r(8300),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,477)),"/root/todakugenv2/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}],u=[],d="/_not-found",x={require:r,loadChunk:()=>Promise.resolve()},g=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/_not-found",pathname:"/_not-found",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8107:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,6840,23)),Promise.resolve().then(r.t.bind(r,8771,23)),Promise.resolve().then(r.t.bind(r,3225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,3982,23))},3249:(e,t,r)=>{Promise.resolve().then(r.bind(r,403))},403:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NavBar:()=>u});var s=r(5344),n=r(8704),o=r(3729),i=r(5094),a=r(6506),l=r(8428),c=r(3746);let u=()=>{let[e,t]=(0,o.useState)(null),[r,u]=(0,o.useState)(!0),d=(0,l.useRouter)(),x=(0,n.e)(),g=(0,o.useCallback)(async()=>{try{u(!0),console.log("Starting sign in...");let{data:e,error:t}=await x.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(t)throw console.error("Sign in error:",t),t;console.log("Sign in response:",e),e?.url&&(window.location.href=e.url)}catch(e){console.error("Error during sign in:",e),u(!1)}},[x.auth]),h=(0,o.useCallback)(async()=>{try{u(!0),console.log("Starting sign out...");let{error:e}=await x.auth.signOut();if(e)throw e;t(null),d.refresh()}catch(e){console.error("Error signing out:",e)}finally{u(!1)}},[x.auth,d]);return((0,o.useEffect)(()=>{let e=!0;(async()=>{try{console.log("Initializing auth...");let{data:{session:r},error:s}=await x.auth.getSession();if(s){console.error("Error getting session:",s);return}console.log("Session:",r),e&&t(r?.user??null)}catch(e){console.error("Error getting session:",e)}finally{e&&u(!1)}})();let{data:{subscription:r}}=x.auth.onAuthStateChange((r,s)=>{console.log("Auth state changed:",r,s),e&&(t(s?.user??null),("SIGNED_IN"===r||"SIGNED_OUT"===r)&&d.refresh())});return()=>{e=!1,r.unsubscribe()}},[x.auth,d]),r)?s.jsx("nav",{className:"border-b",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between h-16 items-center",children:[s.jsx(a.default,{href:"/",className:"text-xl font-bold",children:"Tadoku Reader"}),s.jsx("div",{children:s.jsx(i.z,{disabled:!0,children:"Loading..."})})]})})}):s.jsx("nav",{className:"border-b",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between h-16 items-center",children:[s.jsx(a.default,{href:"/",className:"text-xl font-bold",children:"Tadoku Reader"}),s.jsx("div",{className:"flex items-center gap-4",children:e?(0,s.jsxs)(s.Fragment,{children:[s.jsx(a.default,{href:"/settings",className:"text-sm text-gray-500 hover:text-gray-700",children:s.jsx(c.Z,{className:"h-5 w-5"})}),s.jsx("span",{className:"text-sm text-gray-500",children:e.email}),s.jsx(i.z,{variant:"outline",onClick:h,disabled:r,children:r?"Signing out...":"Sign Out"})]}):s.jsx(i.z,{onClick:g,disabled:r,children:r?"Redirecting...":"Sign in with Google"})})]})})})}},5094:(e,t,r)=>{"use strict";r.d(t,{z:()=>c});var s=r(5344),n=r(3729),o=r(2751),i=r(9247),a=r(1453);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...i},c)=>{let u=n?o.g7:"button";return s.jsx(u,{className:(0,a.cn)(l({variant:t,size:r,className:e})),ref:c,...i})});c.displayName="Button"},8704:(e,t,r)=>{"use strict";r.d(t,{e:()=>o});var s=r(7435);let n=null,o=()=>(n||(n=(0,s.createClientComponentClient)()),n)},1453:(e,t,r)=>{"use strict";r.d(t,{cn:()=>o});var s=r(6815),n=r(9377);function o(...e){return(0,n.m6)((0,s.W)(e))}},477:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x,metadata:()=>d});var s=r(5036),n=r(2195),o=r.n(n);r(5023);var i=r(6843);let a=(0,i.createProxy)(String.raw`/root/todakugenv2/src/components/nav-bar.tsx`),{__esModule:l,$$typeof:c}=a;a.default;let u=(0,i.createProxy)(String.raw`/root/todakugenv2/src/components/nav-bar.tsx#NavBar`),d={title:"Tadoku Japanese Reader",description:"Generate personalized Japanese graded readers based on your level and interests."};function x({children:e}){return s.jsx("html",{lang:"en",children:(0,s.jsxs)("body",{className:o().className,children:[s.jsx(u,{}),e]})})}},5023:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[225,606],()=>r(9910));module.exports=s})();