(()=>{var e={};e.id=458,e.ids=[458],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},3541:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>f,originalPathname:()=>d,pages:()=>c,routeModule:()=>m,tree:()=>u});var n=r(482),s=r(9108),a=r(2563),o=r.n(a),i=r(8300),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let u=["",{children:["stories",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6649)),"/root/todakugenv2/src/app/stories/[id]/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,8323)),"/root/todakugenv2/src/app/stories/[id]/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,4804)),"/root/todakugenv2/src/app/stories/[id]/error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,4004)),"/root/todakugenv2/src/app/stories/[id]/loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,602)),"/root/todakugenv2/src/app/stories/[id]/not-found.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,477)),"/root/todakugenv2/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}],c=["/root/todakugenv2/src/app/stories/[id]/page.tsx"],d="/stories/[id]/page",f={require:r,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/stories/[id]/page",pathname:"/stories/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},8107:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,6840,23)),Promise.resolve().then(r.t.bind(r,8771,23)),Promise.resolve().then(r.t.bind(r,3225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,3982,23))},3249:(e,t,r)=>{Promise.resolve().then(r.bind(r,403))},7948:(e,t,r)=>{Promise.resolve().then(r.bind(r,422))},3987:(e,t,r)=>{Promise.resolve().then(r.bind(r,8682))},7198:(e,t,r)=>{Promise.resolve().then(r.bind(r,8377)),Promise.resolve().then(r.bind(r,3626)),Promise.resolve().then(r.bind(r,4028)),Promise.resolve().then(r.bind(r,9422))},1092:(e,t,r)=>{Promise.resolve().then(r.bind(r,4989)),Promise.resolve().then(r.bind(r,4028))},5303:()=>{},5390:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(9224).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},422:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r(5344),s=r(3626);function a({error:e}){return n.jsx(s.StoryPageError,{error:e})}},8682:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r(5344),s=r(3626);function a(){return n.jsx(s.StoryPageError,{error:Error("Story not found. Please check the URL and try again.")})}},403:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NavBar:()=>c});var n=r(5344),s=r(8704),a=r(3729),o=r(5094),i=r(6506),l=r(8428),u=r(3746);let c=()=>{let[e,t]=(0,a.useState)(null),[r,c]=(0,a.useState)(!0),d=(0,l.useRouter)(),f=(0,s.e)(),m=(0,a.useCallback)(async()=>{try{c(!0),console.log("Starting sign in...");let{data:e,error:t}=await f.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(t)throw console.error("Sign in error:",t),t;console.log("Sign in response:",e),e?.url&&(window.location.href=e.url)}catch(e){console.error("Error during sign in:",e),c(!1)}},[f.auth]),p=(0,a.useCallback)(async()=>{try{c(!0),console.log("Starting sign out...");let{error:e}=await f.auth.signOut();if(e)throw e;t(null),d.refresh()}catch(e){console.error("Error signing out:",e)}finally{c(!1)}},[f.auth,d]);return((0,a.useEffect)(()=>{let e=!0;(async()=>{try{console.log("Initializing auth...");let{data:{session:r},error:n}=await f.auth.getSession();if(n){console.error("Error getting session:",n);return}console.log("Session:",r),e&&t(r?.user??null)}catch(e){console.error("Error getting session:",e)}finally{e&&c(!1)}})();let{data:{subscription:r}}=f.auth.onAuthStateChange((r,n)=>{console.log("Auth state changed:",r,n),e&&(t(n?.user??null),("SIGNED_IN"===r||"SIGNED_OUT"===r)&&d.refresh())});return()=>{e=!1,r.unsubscribe()}},[f.auth,d]),r)?n.jsx("nav",{className:"border-b",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex justify-between h-16 items-center",children:[n.jsx(i.default,{href:"/",className:"text-xl font-bold",children:"Tadoku Reader"}),n.jsx("div",{children:n.jsx(o.z,{disabled:!0,children:"Loading..."})})]})})}):n.jsx("nav",{className:"border-b",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex justify-between h-16 items-center",children:[n.jsx(i.default,{href:"/",className:"text-xl font-bold",children:"Tadoku Reader"}),n.jsx("div",{className:"flex items-center gap-4",children:e?(0,n.jsxs)(n.Fragment,{children:[n.jsx(i.default,{href:"/settings",className:"text-sm text-gray-500 hover:text-gray-700",children:n.jsx(u.Z,{className:"h-5 w-5"})}),n.jsx("span",{className:"text-sm text-gray-500",children:e.email}),n.jsx(o.z,{variant:"outline",onClick:p,disabled:r,children:r?"Signing out...":"Sign Out"})]}):n.jsx(o.z,{onClick:m,disabled:r,children:r?"Redirecting...":"Sign in with Google"})})]})})})}},8377:(e,t,r)=>{"use strict";r.r(t),r.d(t,{StoryPageContainer:()=>el});var n=r(5344),s=r(3729),a=r(5094);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,r(9224).Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var i=r(5390),l=r(4028),u=r(3626),c=r(3673);function d({vocabulary:e}){let[t,r]=(0,s.useState)([]);return((0,s.useEffect)(()=>{Array.isArray(e)&&r(e)},[e]),t?.length)?(0,n.jsxs)("section",{children:[n.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Vocabulary"}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:t.map((e,t)=>(0,n.jsxs)(c.Zb,{children:[n.jsx(c.Ol,{children:(0,n.jsxs)(c.ll,{className:"text-xl",children:[e.word," ",(0,n.jsxs)("span",{className:"text-muted-foreground",children:["(",e.reading,")"]})]})}),(0,n.jsxs)(c.aY,{children:[n.jsx("p",{className:"text-lg mb-2",children:e.meaning}),(0,n.jsxs)("div",{className:"mt-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Example:"}),n.jsx("p",{className:"font-medium",children:e.example}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.example_translation})]})]})]},t))})]}):null}function f({grammar:e}){let[t,r]=(0,s.useState)([]);return((0,s.useEffect)(()=>{Array.isArray(e)&&r(e)},[e]),t?.length)?(0,n.jsxs)("section",{children:[n.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Grammar Points"}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:t.map((e,t)=>(0,n.jsxs)(c.Zb,{children:[n.jsx(c.Ol,{children:n.jsx(c.ll,{className:"text-xl",children:e.pattern})}),(0,n.jsxs)(c.aY,{children:[n.jsx("p",{className:"text-lg mb-2",children:e.explanation}),(0,n.jsxs)("div",{className:"mt-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Example:"}),n.jsx("p",{className:"font-medium",children:e.example}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.example_translation})]})]})]},t))})]}):null}var m=r(5222),p=r(8462),x=r(7411),g=r(1405),v=r(9048),h=r(2409),y=r(2256),b=r(3183),j=r(3975),N="rovingFocusGroup.onEntryFocus",w={bubbles:!1,cancelable:!0},S="RovingFocusGroup",[P,_,R]=(0,x.B)(S),[E,C]=(0,p.b)(S,[R]),[M,k]=E(S),O=s.forwardRef((e,t)=>(0,n.jsx)(P.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,n.jsx)(P.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,n.jsx)(T,{...e,ref:t})})}));O.displayName=S;var T=s.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:a,loop:o=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...p}=e,x=s.useRef(null),v=(0,g.e)(t,x),S=(0,j.gm)(i),[P=null,R]=(0,b.T)({prop:l,defaultProp:u,onChange:c}),[E,C]=s.useState(!1),k=(0,y.W)(d),O=_(r),T=s.useRef(!1),[A,I]=s.useState(0);return s.useEffect(()=>{let e=x.current;if(e)return e.addEventListener(N,k),()=>e.removeEventListener(N,k)},[k]),(0,n.jsx)(M,{scope:r,orientation:a,dir:S,loop:o,currentTabStopId:P,onItemFocus:s.useCallback(e=>R(e),[R]),onItemShiftTab:s.useCallback(()=>C(!0),[]),onFocusableItemAdd:s.useCallback(()=>I(e=>e+1),[]),onFocusableItemRemove:s.useCallback(()=>I(e=>e-1),[]),children:(0,n.jsx)(h.WV.div,{tabIndex:E||0===A?-1:0,"data-orientation":a,...p,ref:v,style:{outline:"none",...e.style},onMouseDown:(0,m.M)(e.onMouseDown,()=>{T.current=!0}),onFocus:(0,m.M)(e.onFocus,e=>{let t=!T.current;if(e.target===e.currentTarget&&t&&!E){let t=new CustomEvent(N,w);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=O().filter(e=>e.focusable);L([e.find(e=>e.active),e.find(e=>e.id===P),...e].filter(Boolean).map(e=>e.ref.current),f)}}T.current=!1}),onBlur:(0,m.M)(e.onBlur,()=>C(!1))})})}),A="RovingFocusGroupItem",I=s.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:a=!0,active:o=!1,tabStopId:i,...l}=e,u=(0,v.M)(),c=i||u,d=k(A,r),f=d.currentTabStopId===c,p=_(r),{onFocusableItemAdd:x,onFocusableItemRemove:g}=d;return s.useEffect(()=>{if(a)return x(),()=>g()},[a,x,g]),(0,n.jsx)(P.ItemSlot,{scope:r,id:c,focusable:a,active:o,children:(0,n.jsx)(h.WV.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:(0,m.M)(e.onMouseDown,e=>{a?d.onItemFocus(c):e.preventDefault()}),onFocus:(0,m.M)(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:(0,m.M)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){d.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=function(e,t,r){var n;let s=(n=e.key,"rtl"!==r?n:"ArrowLeft"===n?"ArrowRight":"ArrowRight"===n?"ArrowLeft":n);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(s))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(s)))return F[s]}(e,d.orientation,d.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let r=p().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t){"prev"===t&&r.reverse();let n=r.indexOf(e.currentTarget);r=d.loop?function(e,t){return e.map((r,n)=>e[(t+n)%e.length])}(r,n+1):r.slice(n+1)}setTimeout(()=>L(r))}})})})});I.displayName=A;var F={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function L(e,t=!1){let r=document.activeElement;for(let n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}var q=r(6069),z=e=>{let{present:t,children:r}=e,n=function(e){var t,r;let[n,a]=s.useState(),o=s.useRef({}),i=s.useRef(e),l=s.useRef("none"),[u,c]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},s.useReducer((e,t)=>r[e][t]??e,t));return s.useEffect(()=>{let e=D(o.current);l.current="mounted"===u?e:"none"},[u]),(0,q.b)(()=>{let t=o.current,r=i.current;if(r!==e){let n=l.current,s=D(t);e?c("MOUNT"):"none"===s||t?.display==="none"?c("UNMOUNT"):r&&n!==s?c("ANIMATION_OUT"):c("UNMOUNT"),i.current=e}},[e,c]),(0,q.b)(()=>{if(n){let e;let t=n.ownerDocument.defaultView??window,r=r=>{let s=D(o.current).includes(r.animationName);if(r.target===n&&s&&(c("ANIMATION_END"),!i.current)){let r=n.style.animationFillMode;n.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===n.style.animationFillMode&&(n.style.animationFillMode=r)})}},s=e=>{e.target===n&&(l.current=D(o.current))};return n.addEventListener("animationstart",s),n.addEventListener("animationcancel",r),n.addEventListener("animationend",r),()=>{t.clearTimeout(e),n.removeEventListener("animationstart",s),n.removeEventListener("animationcancel",r),n.removeEventListener("animationend",r)}}c("ANIMATION_END")},[n,c]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:s.useCallback(e=>{e&&(o.current=getComputedStyle(e)),a(e)},[])}}(t),a="function"==typeof r?r({present:n.isPresent}):s.Children.only(r),o=(0,g.e)(n.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(a));return"function"==typeof r||n.isPresent?s.cloneElement(a,{ref:o}):null};function D(e){return e?.animationName||"none"}z.displayName="Presence";var $="Tabs",[G,U]=(0,p.b)($,[C]),V=C(),[W,H]=G($),Z=s.forwardRef((e,t)=>{let{__scopeTabs:r,value:s,onValueChange:a,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:u="automatic",...c}=e,d=(0,j.gm)(l),[f,m]=(0,b.T)({prop:s,onChange:a,defaultProp:o});return(0,n.jsx)(W,{scope:r,baseId:(0,v.M)(),value:f,onValueChange:m,orientation:i,dir:d,activationMode:u,children:(0,n.jsx)(h.WV.div,{dir:d,"data-orientation":i,...c,ref:t})})});Z.displayName=$;var K="TabsList",B=s.forwardRef((e,t)=>{let{__scopeTabs:r,loop:s=!0,...a}=e,o=H(K,r),i=V(r);return(0,n.jsx)(O,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:s,children:(0,n.jsx)(h.WV.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:t})})});B.displayName=K;var J="TabsTrigger",Y=s.forwardRef((e,t)=>{let{__scopeTabs:r,value:s,disabled:a=!1,...o}=e,i=H(J,r),l=V(r),u=ee(i.baseId,s),c=et(i.baseId,s),d=s===i.value;return(0,n.jsx)(I,{asChild:!0,...l,focusable:!a,active:d,children:(0,n.jsx)(h.WV.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:u,...o,ref:t,onMouseDown:(0,m.M)(e.onMouseDown,e=>{a||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(s)}),onKeyDown:(0,m.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(s)}),onFocus:(0,m.M)(e.onFocus,()=>{let e="manual"!==i.activationMode;d||a||!e||i.onValueChange(s)})})})});Y.displayName=J;var Q="TabsContent",X=s.forwardRef((e,t)=>{let{__scopeTabs:r,value:a,forceMount:o,children:i,...l}=e,u=H(Q,r),c=ee(u.baseId,a),d=et(u.baseId,a),f=a===u.value,m=s.useRef(f);return s.useEffect(()=>{let e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,n.jsx)(z,{present:o||f,children:({present:r})=>(0,n.jsx)(h.WV.div,{"data-state":f?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":c,hidden:!r,id:d,tabIndex:0,...l,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:r&&i})})});function ee(e,t){return`${e}-trigger-${t}`}function et(e,t){return`${e}-content-${t}`}X.displayName=Q;var er=r(1453);let en=s.forwardRef(({className:e,...t},r)=>n.jsx(B,{ref:r,className:(0,er.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));en.displayName=B.displayName;let es=s.forwardRef(({className:e,...t},r)=>n.jsx(Y,{ref:r,className:(0,er.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));es.displayName=Y.displayName;let ea=s.forwardRef(({className:e,...t},r)=>n.jsx(X,{ref:r,className:(0,er.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));function eo({quizzes:e}){let[t,r]=(0,s.useState)([]),[o,i]=(0,s.useState)({}),[l,u]=(0,s.useState)({}),[d,f]=(0,s.useState)({});if((0,s.useEffect)(()=>{Array.isArray(e)&&(r(e),i({}),u({}),f({}))},[e]),!t?.length)return null;let m=t.filter(e=>"vocabulary"===e.type),p=t.filter(e=>"grammar"===e.type),x=t.filter(e=>"comprehension"===e.type),g=(e,t)=>{(null===o[e]||void 0===o[e])&&(i(r=>({...r,[e]:t})),f(t=>({...t,[e]:!0})))},v=e=>{u(t=>({...t,[e]:!t[e]}))},h=(e,t)=>e.correct_answer===t,y=(e,t)=>{let r=`${e.type}-${t}`,s=null!==o[r]&&void 0!==o[r];return(0,n.jsxs)(c.Zb,{className:"mb-4",children:[n.jsx(c.Ol,{children:(0,n.jsxs)(c.ll,{className:"text-lg",children:["vocabulary"===e.type&&"Vocabulary Quiz","grammar"===e.type&&"Grammar Quiz","comprehension"===e.type&&"Comprehension Quiz"]})}),(0,n.jsxs)(c.aY,{children:[e.related_item&&(0,n.jsxs)("p",{className:"text-sm text-muted-foreground mb-2",children:["Related ","vocabulary"===e.type?"word":"pattern",": ",e.related_item]}),n.jsx("p",{className:"mb-4",children:e.question}),n.jsx("div",{className:"space-y-2",children:e.options.map((t,a)=>{let i=o[r]===a,l=h(e,a),u="bg-white hover:bg-gray-50 border-gray-200";return s&&(i?u=l?"bg-green-500 text-white border-green-500":"bg-red-500 text-white border-red-500":l&&(u="bg-green-100 border-green-200")),n.jsx("div",{className:`w-full p-3 rounded-md border cursor-pointer transition-colors ${u}`,onClick:()=>!s&&g(r,a),children:t},a)})}),d[r]&&(0,n.jsxs)("div",{className:"mt-4",children:[n.jsx(a.z,{variant:"ghost",onClick:()=>v(r),className:"text-sm",children:l[r]?"Hide Explanation":"Show Explanation"}),l[r]&&n.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:e.explanation})]})]})]},r)};return(0,n.jsxs)("section",{children:[n.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Quizzes"}),(0,n.jsxs)(Z,{defaultValue:"vocabulary",className:"w-full",children:[(0,n.jsxs)(en,{className:"grid w-full grid-cols-3",children:[(0,n.jsxs)(es,{value:"vocabulary",children:["Vocabulary (",m.length,")"]}),(0,n.jsxs)(es,{value:"grammar",children:["Grammar (",p.length,")"]}),(0,n.jsxs)(es,{value:"comprehension",children:["Comprehension (",x.length,")"]})]}),n.jsx(ea,{value:"vocabulary",children:m.map((e,t)=>y(e,t))}),n.jsx(ea,{value:"grammar",children:p.map((e,t)=>y(e,t))}),n.jsx(ea,{value:"comprehension",children:x.map((e,t)=>y(e,t))})]})]})}function ei({story:e,error:t}){let[r,c]=(0,s.useState)(!1),[m,p]=(0,s.useState)(null);return((0,s.useEffect)(()=>{if(e){let t="string"==typeof e.vocabulary?JSON.parse(e.vocabulary):e.vocabulary,r="string"==typeof e.grammar?JSON.parse(e.grammar):e.grammar,n="string"==typeof e.quizzes?JSON.parse(e.quizzes):e.quizzes;p({...e,vocabulary:t,grammar:r,quizzes:n})}},[e]),t)?n.jsx(u.StoryPageError,{error:t}):m?(0,n.jsxs)("div",{className:"prose dark:prose-invert max-w-none",children:[(0,n.jsxs)("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Japanese Text"}),n.jsx("p",{className:"whitespace-pre-wrap text-lg",children:m.content_jp})]}),(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsxs)(a.z,{variant:"outline",onClick:()=>c(!r),className:"w-full flex items-center justify-between",children:[n.jsx("span",{children:"English Translation"}),r?n.jsx(o,{className:"h-4 w-4"}):n.jsx(i.Z,{className:"h-4 w-4"})]}),r&&n.jsx("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:n.jsx("p",{className:"whitespace-pre-wrap",children:m.content_en})})]}),(0,n.jsxs)("div",{className:"space-y-8",children:[m.vocabulary?.length>0&&n.jsx(d,{vocabulary:m.vocabulary}),m.grammar?.length>0&&n.jsx(f,{grammar:m.grammar}),m.quizzes?.length>0&&n.jsx(eo,{quizzes:m.quizzes})]})]}):n.jsx(l.StoryPageLoading,{})}function el({story:e,error:t}){return n.jsx("div",{className:"container mx-auto px-4 py-8",children:n.jsx(s.Suspense,{fallback:n.jsx(l.StoryPageLoading,{}),children:n.jsx(ei,{story:e,error:t})})})}ea.displayName=X.displayName},3626:(e,t,r)=>{"use strict";r.r(t),r.d(t,{StoryPageError:()=>f});var n=r(5344);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(9224).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var a=r(3729),o=r(9247),i=r(1453);let l=(0,o.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),u=a.forwardRef(({className:e,variant:t,...r},s)=>n.jsx("div",{ref:s,role:"alert",className:(0,i.cn)(l({variant:t}),e),...r}));u.displayName="Alert";let c=a.forwardRef(({className:e,...t},r)=>n.jsx("h5",{ref:r,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",e),...t}));c.displayName="AlertTitle";let d=a.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",e),...t}));function f({error:e}){return n.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,n.jsxs)(u,{variant:"destructive",children:[n.jsx(s,{className:"h-4 w-4"}),n.jsx(c,{children:"Error"}),n.jsx(d,{children:e.message||"An error occurred while loading the story."})]})})}d.displayName="AlertDescription"},4989:(e,t,r)=>{"use strict";r.r(t),r.d(t,{StoryPageLoadingProgress:()=>N});var n=r(5344),s=r(3729),a=r(8462),o=r(2409),i="Progress",[l,u]=(0,a.b)(i),[c,d]=l(i),f=s.forwardRef((e,t)=>{var r,s;let{__scopeProgress:a,value:i=null,max:l,getValueLabel:u=x,...d}=e;(l||0===l)&&!h(l)&&console.error((r=`${l}`,`Invalid prop \`max\` of value \`${r}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let f=h(l)?l:100;null===i||y(i,f)||console.error((s=`${i}`,`Invalid prop \`value\` of value \`${s}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let m=y(i,f)?i:null,p=v(m)?u(m,f):void 0;return(0,n.jsx)(c,{scope:a,value:m,max:f,children:(0,n.jsx)(o.WV.div,{"aria-valuemax":f,"aria-valuemin":0,"aria-valuenow":v(m)?m:void 0,"aria-valuetext":p,role:"progressbar","data-state":g(m,f),"data-value":m??void 0,"data-max":f,...d,ref:t})})});f.displayName=i;var m="ProgressIndicator",p=s.forwardRef((e,t)=>{let{__scopeProgress:r,...s}=e,a=d(m,r);return(0,n.jsx)(o.WV.div,{"data-state":g(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:t})});function x(e,t){return`${Math.round(e/t*100)}%`}function g(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function v(e){return"number"==typeof e}function h(e){return v(e)&&!isNaN(e)&&e>0}function y(e,t){return v(e)&&!isNaN(e)&&e<=t&&e>=0}p.displayName=m;var b=r(1453);let j=s.forwardRef(({className:e,value:t,...r},s)=>n.jsx(f,{ref:s,className:(0,b.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...r,children:n.jsx(p,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));function N(){let[e,t]=(0,s.useState)(0);return(0,s.useEffect)(()=>{let e=setInterval(()=>{t(e=>e>=90?e:e+10)},100);return()=>clearInterval(e)},[]),n.jsx("div",{className:"fixed top-0 left-0 right-0 z-50",children:n.jsx(j,{value:e,className:"h-1"})})}j.displayName=f.displayName},4028:(e,t,r)=>{"use strict";r.r(t),r.d(t,{StoryPageLoading:()=>i});var n=r(5344),s=r(3673),a=r(1453);function o({className:e,...t}){return n.jsx("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",e),...t})}function i(){return n.jsx("div",{className:"container mx-auto px-4 py-8",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsxs)("div",{children:[n.jsx(o,{className:"h-12 w-3/4 mb-4"}),n.jsx(o,{className:"h-8 w-1/4"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,n.jsxs)("div",{children:[n.jsx(o,{className:"h-8 w-1/3 mb-4"}),n.jsx(s.Zb,{className:"p-6",children:(0,n.jsxs)("div",{className:"space-y-4",children:[n.jsx(o,{className:"h-4 w-full"}),n.jsx(o,{className:"h-4 w-5/6"}),n.jsx(o,{className:"h-4 w-4/6"})]})})]}),(0,n.jsxs)("div",{children:[n.jsx(o,{className:"h-8 w-1/3 mb-4"}),n.jsx(s.Zb,{className:"p-6",children:(0,n.jsxs)("div",{className:"space-y-4",children:[n.jsx(o,{className:"h-4 w-full"}),n.jsx(o,{className:"h-4 w-5/6"}),n.jsx(o,{className:"h-4 w-4/6"})]})})]})]}),(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsxs)("div",{children:[n.jsx(o,{className:"h-8 w-1/4 mb-4"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Array.from({length:4}).map((e,t)=>n.jsx(s.Zb,{className:"p-4",children:(0,n.jsxs)("div",{className:"space-y-3",children:[n.jsx(o,{className:"h-6 w-3/4"}),n.jsx(o,{className:"h-4 w-1/2"}),n.jsx(o,{className:"h-4 w-2/3"})]})},t))})]}),(0,n.jsxs)("div",{children:[n.jsx(o,{className:"h-8 w-1/4 mb-4"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Array.from({length:4}).map((e,t)=>n.jsx(s.Zb,{className:"p-4",children:(0,n.jsxs)("div",{className:"space-y-3",children:[n.jsx(o,{className:"h-6 w-3/4"}),n.jsx(o,{className:"h-4 w-1/2"}),n.jsx(o,{className:"h-4 w-2/3"})]})},t))})]}),(0,n.jsxs)("div",{children:[n.jsx(o,{className:"h-8 w-1/4 mb-4"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Array.from({length:2}).map((e,t)=>n.jsx(s.Zb,{className:"p-4",children:(0,n.jsxs)("div",{className:"space-y-3",children:[n.jsx(o,{className:"h-6 w-3/4"}),n.jsx(o,{className:"h-4 w-full"}),n.jsx(o,{className:"h-4 w-2/3"})]})},t))})]})]})]})})})}},9422:(e,t,r)=>{"use strict";r.r(t),r.d(t,{StoryPageMetadata:()=>s});var n=r(5344);function s({story:e}){return(0,n.jsxs)(n.Fragment,{children:[n.jsx("title",{children:e.title}),n.jsx("meta",{name:"description",content:`Read a Japanese graded reader story: ${e.title}`}),n.jsx("meta",{property:"og:title",content:e.title}),n.jsx("meta",{property:"og:description",content:`Read a Japanese graded reader story: ${e.title}`}),n.jsx("meta",{property:"og:type",content:"article"}),n.jsx("meta",{property:"article:published_time",content:e.created_at}),n.jsx("meta",{property:"article:author",content:"Todaku Reader"}),n.jsx("meta",{property:"article:section",content:"Japanese Graded Readers"})]})}},5094:(e,t,r)=>{"use strict";r.d(t,{z:()=>u});var n=r(5344),s=r(3729),a=r(2751),o=r(9247),i=r(1453);let l=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),u=s.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...o},u)=>{let c=s?a.g7:"button";return n.jsx(c,{className:(0,i.cn)(l({variant:t,size:r,className:e})),ref:u,...o})});u.displayName="Button"},3673:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>i,Zb:()=>o,aY:()=>u,ll:()=>l});var n=r(5344),s=r(3729),a=r(1453);let o=s.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));o.displayName="Card";let i=s.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let l=s.forwardRef(({className:e,...t},r)=>n.jsx("h3",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle",s.forwardRef(({className:e,...t},r)=>n.jsx("p",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";let u=s.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:(0,a.cn)("p-6 pt-0",e),...t}));u.displayName="CardContent",s.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},8704:(e,t,r)=>{"use strict";r.d(t,{e:()=>a});var n=r(7435);let s=null,a=()=>(s||(s=(0,n.createClientComponentClient)()),s)},1453:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var n=r(6815),s=r(9377);function a(...e){return(0,s.m6)((0,n.W)(e))}},4778:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"bailoutToClientRendering",{enumerable:!0,get:function(){return a}});let n=r(8675),s=r(5869);function a(e){let t=s.staticGenerationAsyncStorage.getStore();if((null==t||!t.forceStatic)&&(null==t?void 0:t.isStaticGeneration))throw new n.BailoutToCSRError(e)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4552:(e,t,r)=>{"use strict";function n(e){}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"clientHookInServerComponentError",{enumerable:!0,get:function(){return n}}),r(6783),r(2),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9738:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return p},useSearchParams:function(){return x},usePathname:function(){return g},ServerInsertedHTMLContext:function(){return u.ServerInsertedHTMLContext},useServerInsertedHTML:function(){return u.useServerInsertedHTML},useRouter:function(){return v},useParams:function(){return h},useSelectedLayoutSegments:function(){return y},useSelectedLayoutSegment:function(){return b},redirect:function(){return c.redirect},permanentRedirect:function(){return c.permanentRedirect},RedirectType:function(){return c.RedirectType},notFound:function(){return d.notFound}});let n=r(2),s=r(6980),a=r(7210),o=r(4552),i=r(3092),l=r(5458),u=r(545),c=r(8010),d=r(2100),f=Symbol("internal for urlsearchparams readonly");function m(){return Error("ReadonlyURLSearchParams cannot be modified")}class p{[Symbol.iterator](){return this[f][Symbol.iterator]()}append(){throw m()}delete(){throw m()}set(){throw m()}sort(){throw m()}constructor(e){this[f]=e,this.entries=e.entries.bind(e),this.forEach=e.forEach.bind(e),this.get=e.get.bind(e),this.getAll=e.getAll.bind(e),this.has=e.has.bind(e),this.keys=e.keys.bind(e),this.values=e.values.bind(e),this.toString=e.toString.bind(e),this.size=e.size}}function x(){(0,o.clientHookInServerComponentError)("useSearchParams");let e=(0,n.useContext)(a.SearchParamsContext),t=(0,n.useMemo)(()=>e?new p(e):null,[e]);{let{bailoutToClientRendering:e}=r(4778);e("useSearchParams()")}return t}function g(){return(0,o.clientHookInServerComponentError)("usePathname"),(0,n.useContext)(a.PathnameContext)}function v(){(0,o.clientHookInServerComponentError)("useRouter");let e=(0,n.useContext)(s.AppRouterContext);if(null===e)throw Error("invariant expected app router to be mounted");return e}function h(){(0,o.clientHookInServerComponentError)("useParams");let e=(0,n.useContext)(s.GlobalLayoutRouterContext),t=(0,n.useContext)(a.PathParamsContext);return(0,n.useMemo)(()=>(null==e?void 0:e.tree)?function e(t,r){for(let n of(void 0===r&&(r={}),Object.values(t[1]))){let t=n[0],s=Array.isArray(t),a=s?t[1]:t;!a||a.startsWith(l.PAGE_SEGMENT_KEY)||(s&&("c"===t[2]||"oc"===t[2])?r[t[0]]=t[1].split("/"):s&&(r[t[0]]=t[1]),r=e(n,r))}return r}(e.tree):t,[null==e?void 0:e.tree,t])}function y(e){void 0===e&&(e="children"),(0,o.clientHookInServerComponentError)("useSelectedLayoutSegments");let{tree:t}=(0,n.useContext)(s.LayoutRouterContext);return function e(t,r,n,s){let a;if(void 0===n&&(n=!0),void 0===s&&(s=[]),n)a=t[1][r];else{var o;let e=t[1];a=null!=(o=e.children)?o:Object.values(e)[0]}if(!a)return s;let u=a[0],c=(0,i.getSegmentValue)(u);return!c||c.startsWith(l.PAGE_SEGMENT_KEY)?s:(s.push(c),e(a,r,!1,s))}(t,e)}function b(e){void 0===e&&(e="children"),(0,o.clientHookInServerComponentError)("useSelectedLayoutSegment");let t=y(e);return 0===t.length?null:t[0]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2100:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{notFound:function(){return n},isNotFoundError:function(){return s}});let r="NEXT_NOT_FOUND";function n(){let e=Error(r);throw e.digest=r,e}function s(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5858:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8010:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return n},getRedirectError:function(){return l},redirect:function(){return u},permanentRedirect:function(){return c},isRedirectError:function(){return d},getURLFromRedirectError:function(){return f},getRedirectTypeFromError:function(){return m},getRedirectStatusCodeFromError:function(){return p}});let s=r(4580),a=r(2934),o=r(5858),i="NEXT_REDIRECT";function l(e,t,r){void 0===r&&(r=o.RedirectStatusCode.TemporaryRedirect);let n=Error(i);n.digest=i+";"+t+";"+e+";"+r+";";let a=s.requestAsyncStorage.getStore();return a&&(n.mutableCookies=a.mutableCookies),n}function u(e,t){void 0===t&&(t="replace");let r=a.actionAsyncStorage.getStore();throw l(e,t,(null==r?void 0:r.isAction)?o.RedirectStatusCode.SeeOther:o.RedirectStatusCode.TemporaryRedirect)}function c(e,t){void 0===t&&(t="replace");let r=a.actionAsyncStorage.getStore();throw l(e,t,(null==r?void 0:r.isAction)?o.RedirectStatusCode.SeeOther:o.RedirectStatusCode.PermanentRedirect)}function d(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r,n,s]=e.digest.split(";",4),a=Number(s);return t===i&&("replace"===r||"push"===r)&&"string"==typeof n&&!isNaN(a)&&a in o.RedirectStatusCode}function f(e){return d(e)?e.digest.split(";",3)[2]:null}function m(e){if(!d(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function p(e){if(!d(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(n||(n={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3092:(e,t)=>{"use strict";function r(e){return Array.isArray(e)?e[1]:e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getSegmentValue",{enumerable:!0,get:function(){return r}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6980:(e,t,r)=>{"use strict";e.exports=r(482).vendored.contexts.AppRouterContext},7210:(e,t,r)=>{"use strict";e.exports=r(482).vendored.contexts.HooksClientContext},545:(e,t,r)=>{"use strict";e.exports=r(482).vendored.contexts.ServerInsertedHtml},8675:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{BailoutToCSRError:function(){return n},isBailoutToCSRError:function(){return s}});let r="BAILOUT_TO_CLIENT_SIDE_RENDERING";class n extends Error{constructor(e){super("Bail out to client-side rendering: "+e),this.reason=e,this.digest=r}}function s(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}},5458:(e,t)=>{"use strict";function r(e){return"("===e[0]&&e.endsWith(")")}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isGroupSegment:function(){return r},PAGE_SEGMENT_KEY:function(){return n},DEFAULT_SEGMENT_KEY:function(){return s}});let n="__PAGE__",s="__DEFAULT__"},477:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f,metadata:()=>d});var n=r(5036),s=r(2195),a=r.n(s);r(5023);var o=r(6843);let i=(0,o.createProxy)(String.raw`/root/todakugenv2/src/components/nav-bar.tsx`),{__esModule:l,$$typeof:u}=i;i.default;let c=(0,o.createProxy)(String.raw`/root/todakugenv2/src/components/nav-bar.tsx#NavBar`),d={title:"Tadoku Japanese Reader",description:"Generate personalized Japanese graded readers based on your level and interests."};function f({children:e}){return n.jsx("html",{lang:"en",children:(0,n.jsxs)("body",{className:a().className,children:[n.jsx(c,{}),e]})})}},4804:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>a,__esModule:()=>s,default:()=>o});let n=(0,r(6843).createProxy)(String.raw`/root/todakugenv2/src/app/stories/[id]/error.tsx`),{__esModule:s,$$typeof:a}=n,o=n.default},8323:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(5036);function s({children:e}){return n.jsx("main",{className:"min-h-screen bg-background",children:e})}},4004:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(5036),s=r(6190),a=r(6843);let o=(0,a.createProxy)(String.raw`/root/todakugenv2/src/components/story-page-loading-progress.tsx`),{__esModule:i,$$typeof:l}=o;o.default;let u=(0,a.createProxy)(String.raw`/root/todakugenv2/src/components/story-page-loading-progress.tsx#StoryPageLoadingProgress`);function c(){return(0,n.jsxs)(n.Fragment,{children:[n.jsx(u,{}),n.jsx(s.m,{})]})}},602:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>a,__esModule:()=>s,default:()=>o});let n=(0,r(6843).createProxy)(String.raw`/root/todakugenv2/src/app/stories/[id]/not-found.tsx`),{__esModule:s,$$typeof:a}=n,o=n.default},6649:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w,revalidate:()=>N});var n=r(5036),s=r(7699),a=r(7439),o=r(2),i=r(6843);let l=(0,i.createProxy)(String.raw`/root/todakugenv2/src/components/story-page-container.tsx`),{__esModule:u,$$typeof:c}=l;l.default;let d=(0,i.createProxy)(String.raw`/root/todakugenv2/src/components/story-page-container.tsx#StoryPageContainer`);var f=r(6190);let m=(0,i.createProxy)(String.raw`/root/todakugenv2/src/components/story-page-error.tsx`),{__esModule:p,$$typeof:x}=m;m.default;let g=(0,i.createProxy)(String.raw`/root/todakugenv2/src/components/story-page-error.tsx#StoryPageError`),v=(0,i.createProxy)(String.raw`/root/todakugenv2/src/components/story-page-metadata.tsx`),{__esModule:h,$$typeof:y}=v;v.default;let b=(0,i.createProxy)(String.raw`/root/todakugenv2/src/components/story-page-metadata.tsx#StoryPageMetadata`);var j=r(9738);let N=3600;async function w({params:e}){let t=(0,s.createServerComponentClient)({cookies:a.cookies}),{data:r,error:i}=await t.from("stories").select("*").eq("id",e.id).single();return i?(console.error("Error fetching story:",i),n.jsx(g,{error:i})):(r||(0,j.notFound)(),console.log("Fetched story:",r),(0,n.jsxs)(n.Fragment,{children:[n.jsx(b,{story:r}),n.jsx(o.Suspense,{fallback:n.jsx(f.m,{}),children:n.jsx(d,{story:r})})]}))}},6190:(e,t,r)=>{"use strict";r.d(t,{m:()=>i});var n=r(6843);let s=(0,n.createProxy)(String.raw`/root/todakugenv2/src/components/story-page-loading.tsx`),{__esModule:a,$$typeof:o}=s;s.default;let i=(0,n.createProxy)(String.raw`/root/todakugenv2/src/components/story-page-loading.tsx#StoryPageLoading`)},5023:()=>{},5222:(e,t,r)=>{"use strict";function n(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e?.(n),!1===r||!n.defaultPrevented)return t?.(n)}}r.d(t,{M:()=>n})},7411:(e,t,r)=>{"use strict";r.d(t,{B:()=>l});var n=r(3729),s=r(8462),a=r(1405),o=r(2751),i=r(5344);function l(e){let t=e+"CollectionProvider",[r,l]=(0,s.b)(t),[u,c]=r(t,{collectionRef:{current:null},itemMap:new Map}),d=e=>{let{scope:t,children:r}=e,s=n.useRef(null),a=n.useRef(new Map).current;return(0,i.jsx)(u,{scope:t,itemMap:a,collectionRef:s,children:r})};d.displayName=t;let f=e+"CollectionSlot",m=n.forwardRef((e,t)=>{let{scope:r,children:n}=e,s=c(f,r),l=(0,a.e)(t,s.collectionRef);return(0,i.jsx)(o.g7,{ref:l,children:n})});m.displayName=f;let p=e+"CollectionItemSlot",x="data-radix-collection-item",g=n.forwardRef((e,t)=>{let{scope:r,children:s,...l}=e,u=n.useRef(null),d=(0,a.e)(t,u),f=c(p,r);return n.useEffect(()=>(f.itemMap.set(u,{ref:u,...l}),()=>void f.itemMap.delete(u))),(0,i.jsx)(o.g7,{[x]:"",ref:d,children:s})});return g.displayName=p,[{Provider:d,Slot:m,ItemSlot:g},function(t){let r=c(e+"CollectionConsumer",t);return n.useCallback(()=>{let e=r.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${x}]`));return Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},l]}},8462:(e,t,r)=>{"use strict";r.d(t,{b:()=>a});var n=r(3729),s=r(5344);function a(e,t=[]){let r=[],a=()=>{let t=r.map(e=>n.createContext(e));return function(r){let s=r?.[e]||t;return n.useMemo(()=>({[`__scope${e}`]:{...r,[e]:s}}),[r,s])}};return a.scopeName=e,[function(t,a){let o=n.createContext(a),i=r.length;r=[...r,a];let l=t=>{let{scope:r,children:a,...l}=t,u=r?.[e]?.[i]||o,c=n.useMemo(()=>l,Object.values(l));return(0,s.jsx)(u.Provider,{value:c,children:a})};return l.displayName=t+"Provider",[l,function(r,s){let l=s?.[e]?.[i]||o,u=n.useContext(l);if(u)return u;if(void 0!==a)return a;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=r.reduce((t,{useScope:r,scopeName:n})=>{let s=r(e)[`__scope${n}`];return{...t,...s}},{});return n.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}(a,...t)]}},3975:(e,t,r)=>{"use strict";r.d(t,{gm:()=>a});var n=r(3729);r(5344);var s=n.createContext(void 0);function a(e){let t=n.useContext(s);return e||t||"ltr"}},9048:(e,t,r)=>{"use strict";r.d(t,{M:()=>l});var n,s=r(3729),a=r(6069),o=(n||(n=r.t(s,2)))["useId".toString()]||(()=>void 0),i=0;function l(e){let[t,r]=s.useState(o());return(0,a.b)(()=>{e||r(e=>e??String(i++))},[e]),e||(t?`radix-${t}`:"")}},2409:(e,t,r)=>{"use strict";r.d(t,{WV:()=>i,jH:()=>l});var n=r(3729),s=r(1202),a=r(2751),o=r(5344),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let r=n.forwardRef((e,r)=>{let{asChild:n,...s}=e,i=n?a.g7:t;return(0,o.jsx)(i,{...s,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function l(e,t){e&&s.flushSync(()=>e.dispatchEvent(t))}},2256:(e,t,r)=>{"use strict";r.d(t,{W:()=>s});var n=r(3729);function s(e){let t=n.useRef(e);return n.useEffect(()=>{t.current=e}),n.useMemo(()=>(...e)=>t.current?.(...e),[])}},3183:(e,t,r)=>{"use strict";r.d(t,{T:()=>a});var n=r(3729),s=r(2256);function a({prop:e,defaultProp:t,onChange:r=()=>{}}){let[a,o]=function({defaultProp:e,onChange:t}){let r=n.useState(e),[a]=r,o=n.useRef(a),i=(0,s.W)(t);return n.useEffect(()=>{o.current!==a&&(i(a),o.current=a)},[a,o,i]),r}({defaultProp:t,onChange:r}),i=void 0!==e,l=i?e:a,u=(0,s.W)(r);return[l,n.useCallback(t=>{if(i){let r="function"==typeof t?t(e):t;r!==e&&u(r)}else o(t)},[i,e,o,u])]}},6069:(e,t,r)=>{"use strict";r.d(t,{b:()=>s});var n=r(3729),s=globalThis?.document?n.useLayoutEffect:()=>{}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[225,606,421],()=>r(3541));module.exports=n})();